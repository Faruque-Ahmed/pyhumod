<!DOCTYPE html>
<html>
<head>
<title>Sending and receiving text messages</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
</head>
<body>
<p><a href="../">Home</a> â€º <a href="./">Docs</a></p><hr>

<h1>Sending and receiving text messages</h1>
<p>Once the modem is properly detected and initialized, you can send, read and delete text messages. One important step at the start is to enter a so called 'TEXT mode', as sending texts in 'PDU mode' is not yet supported. Once this is accomplished you can start sending, reading and deleting messages. </p><pre>&gt;&gt;&gt; modem.enable_textmode(True)</pre>
<h1>Sending Texts</h1>
<p>To send a text, call the <code>sms_send()</code> method with two string arguments:</p><ol><li>A number to send to, e.g. '+353987654321' </li><li>The contents of the message. </li></ol>
<pre>&gt;&gt;&gt; modem.sms_send('+353987654321', 'Are you free for dinner?')</pre>
<h1>Listing Texts</h1>
<p>To list texts call the <code>sms_list()</code> method. </p><pre>&gt;&gt;&gt; modem.sms_list()
['0,"REC READ","00353?????????",,"09/06/19,14:23:14+04"',
'1,"REC READ","+353?????????",,"09/06/27,14:43:09+04"']</pre><h1>Reading Texts</h1><p>To read a messages, call the <code>sms_read()</code> method with message ID as an argument. </p><pre>&gt;&gt;&gt; modem.sms_read(0)
'Result out this evening. Gud luck'</pre><h1><!--Deleting_Texts-->Deleting Texts</h1><p>In a similar way, in order to delete a message, call the <code>sms_del()</code> method with message ID as an argument. </p><pre>&gt;&gt;&gt; modem.sms_del(0)</pre>
<h1>New Message Notifications</h1>
<p>By default new message notifications are not enabled. There are two steps to enable NMI:
<ol>
    <li>Start the prober service </li>
    <li>Call enable_nmi() method with True as argument. </li>
</ol>
<pre>&gt;&gt;&gt; modem.prober.start()
&gt;&gt;&gt; modem.enable_nmi(True)</pre>
<p>Once this is done, a new message can be handled by some code of your choice. By default it's a method living in humod.actions.new_message() and it's a trivial one: </p>
<pre>def new_message(modem, message):
    """New message action."""
    print('New message arrived.')</pre>
<p>You can create your own action-handling functions. See <a href="EventHandling.html">EventHandling</a> to find out how. </p>
<h3>Next: Find out more about your modem by reading <a href="ShowStaticInfo.html">its static data</a>.</h3>
<hr>
<p>Question
<p>Regarding read_message,  I have received an SMS that was sort of encoded.  Other messages were in plain text but this particular message send via cellphone was in some sort of encoding (it was a two part message if that helps). </p>
<p>Is this normal? what encoding do cellphones use to send their messages?  Can anybody point me in the right direction. thanks.</p>
<p>Answer
<p>Use siminfo <code>is_gsm_encoded</code> to detect message is encoded and <code>decode_gsm</code> to decode
<p>Question
<p>Wondering how I can select messages based on sender? So far used message ID but only returns the message, I need to select only messages from certain numbers to operate on.</p>
<p>Answer
<p>I think that should do:</p>
<pre>#!/usr/bin/env python
import humod
class MyModem(humod.Modem):
    def sms_list_by_num(self, number):
        """Lists messages from a particular sender."""
        messages = []
        for message in self.sms_list():
            if number in message[2]:
                messages.append(message)
        return messages

modem = MyModem()
print(modem.sms_list_by_num('12345678'))</pre>
<p>Question
<p>Is there any way to detect the callerID of an incoming call (received via humod.actions.PATTERN call)?  The message content comes in as 'RING' </p>
<p>Answer
<p>Interesting, we have to figure this one out...
</body>
</html>